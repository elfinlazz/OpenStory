<?xml version="1.0" encoding="utf-8"?>

<Definitions xmlns="PacketFormat" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="PacketFormat PacketFormat.xsd">
  <Global>
    <Packet Name="Ping" Origin="Server" />
    <Packet Name="Pong" Origin="Client" />
  </Global>
  <Login>
    <Packet Name="RSAPublicKey" Origin="Server" Version="55">
      <Int32 />
      <MapleString Name="KeyString" Order="1" />
    </Packet>
    <Packet Name="RSAPublicKeySent" Origin="Server" Version="55">
      <Literal Order="1">00 00 00</Literal>
    </Packet>
    <Packet Name="AuthenticationRequest" Origin="Client" Version="55">
      <MapleString Name="UserName" Order="1" />
      <MapleString Name="PasswordHash" Order="2" />
      <ByteString Name="MACAddress" Length="6" Order="3" />
      <ByteString Name="MachineID" Length="4" Order="4" />
      <Literal Order="5">
        00 00 00 00 41 F6 00 00 00 00 02 00
      </Literal>
    </Packet>
    <Packet Name="AuthenticationResponse" Origin="Server" Version="55">
      <Byte Name="StatusFlag" Order="1" />
      <Literal Order="2">00 00 00 00 00</Literal>
      <Switch Value="StatusFlag" Order="3">
        <Case Value="0"></Case>
      </Switch>
    </Packet>
    <Packet Name="PinOperation" Origin="Client" Version="55">
      <Literal Order="1">01</Literal>
      <Boolean Name="IsInvalidFormat" Order="2" />
      <Int32 Name="AccountID" Order="3" />
      <MapleString Name="PinCode" Order="4" />
    </Packet>
    <Packet Name="CharacterList" Origin="Server" Version="55">
      <Byte Name="WorldID" Order="1" />
      <Byte Name="CharacterCount" Order="2" />
      <Repeat Count="CharacterCount" Order="3">
        <Int32 Name="CharacterID" Order="1" />
        <PaddedString Name="CharacterName" Length="13" Terminator="00" Order="2" />
        <Byte Name="Gender" Order="3" />
        <Byte Name="SkinColor" Order="4" />
        <Int32 Name="FaceID" Order="5" />
        <Int32 Name="HairID" Order="6" />
        <ZeroString Length="24" Order="7" />
        <Byte Name="Level" Order="8" />
        <Int16 Name="JobID" Order="9" />
        <Int16 Name="STR" Order="10" />
        <Int16 Name="DEX" Order="11" />
        <Int16 Name="INT" Order="12" />
        <Int16 Name="LUK" Order="13" />
        <Int16 Name="CurrentHP" Order="14" />
        <Int16 Name="MaxHP" Order="15" />
        <Int16 Name="CurrentMP" Order="16" />
        <Int16 Name="MaxMP" Order="17" />
        <Int16 Name="RemainingAP" Order="18" />
        <Int16 Name="RemainingSP" Order="19" />
        <Int32 Name="CurrentEXP" Order="20" />
        <Int16 Name="Fame" Order="21" />
        <Int32 Name="MapID" Order="22" />
        <Int32Point Name="SpawnPoint" Order="23" />
        <CharacterAppearance Order="24" />
        <Boolean Name="IsOnRanks" Order="25" />
        <If Expression="IsOnRanks">
          <Int32 Name="WorldRank" Order="1" />
          <Int32 Name="WorldRankMove" Order="2" />
          <Int32 Name="JobRank" Order="3" />
          <Int32 Name="JobRankMove" Order="4" />
        </If>
      </Repeat>
      <Int32 Order="4" />
    </Packet>
  </Login>
  <Channel>
    <Packet Name="WarpToMap" Origin="Server" Version="55">
      <Int16 Name="ChannelId" Order="1" />
      <Int16 Name="WorldId" Order="2" />
      <Literal Name="Unknown1" Size="4" Order="3" />
      <Int32 Name="RandomSeed1" />
      <Int32 Name="RandomSeed2" />
      <Int32 Name="RandomSeed3" />
      <Separator Size="8">0xFF</Separator>
      <Int32 Name="CharacterId" />
      <String Name="CharacterName" Size="13" Terminator="Null" />
      <Byte Name="Gender" />
      <Byte Name="SkinColor" />
      <Int32 Name="FaceId" />
      <Int32 Name="HairId" />
      <Separator Size="24">0x00</Separator>
      <Byte Name="Level" />
      <Int16 Name="JobId" />
      <Int16 Name="Str" />
      <Int16 Name="Dex" />
      <Int16 Name="Int" />
      <Int16 Name="Luk" />
      <Int16 Name="MaxHP" />
      <Int16 Name="MaxMP" />
      <Int16 Name="CurrentHP" />
      <Int16 Name="CurrentMP" />
      <Int16 Name="RemainingAP" />
      <Int16 Name="RemainingSP" />
      <Int32 Name="CurrentExp" />
      <Int16 Name="Fame" />
      <Int32 Name="MapId" />
      <Int32 Name="SpawnPoint" />
      <Byte Name="IsGM" AsType="Boolean" />
      <Byte Name="BuddyListCapacity" />
      <Byte Name="HasBlessSkill" AsType="Boolean" />
      <IfTrue Expression="HasBlessSkill">
        <MapleString Name="LinkedCharacterName" />
      </IfTrue>
      <Int32 Name="Meso" />
      <Byte Name="EquipSlots" />
      <Byte Name="UseSlots" />
      <Byte Name="SetupSlots" />
      <Byte Name="EtcSlots" />
      <Byte Name="CashSlots" />

    </Packet>
  </Channel>
</Definitions>